test_full_frames: false

# Dataset paths
dataset:
  train:
    chunk_folder: "./chunks_dataset/chunks"
    orig_chunk_folder: "./chunks_dataset/orig_chunks"
    chunk_height: 132
    chunk_width: 132
  val:
    chunk_folder: "./chunks_dataset/chunks"
    orig_chunk_folder: "./chunks_dataset/orig_chunks"
    chunk_height: 132
    chunk_width: 132
  test:
    chunk_folder: "./chunks_dataset/chunks"
    orig_chunk_folder: "./chunks_dataset/orig_chunks"
    chunk_height: 132
    chunk_width: 132

# NO VVC FEATURES - baseline comparison
# fused_maps_dir: null

# Dataloader config - WORKER AFFINITY optimization
dataloader:
  batch_size: 8            # RESTORED: Piotr's batch size
  val_batch_size: 12
  test_batch_size: 12
  n_step: 300              # RESTORED: Piotr's quick epochs!
  val_n_step: 50
  test_n_step: 5
  num_workers: 4           # With worker affinity - each worker handles subset
  prefetch_factor: 1       # REDUCED: Worker affinity needs less prefetch

# Training config - RESTORED to Piotr's approach
trainer:
  mode: enhancer
  precision: null          # RESTORED: No mixed precision (simpler)
  # limit_train_batches removed - using n_step in LoaderWrapper
  limit_val_batches: 0.1   # Keep: 10% validation
  channels_grad_scales:
    - 0.66666
    - 0.66666
    - 0.66666
  enhancer:
    epochs: 50                   # MORE epochs like Piotr (he used 99)
    lr: 0.0001
    scheduler_gamma: 0.5
    scheduler_milestones: [15, 30, 45]
    saved_chunk_folder: enhanced/baseline_comparison

# Enhancer - DENSE 64-48-32-16 (PIOTR'S BEST) WITHOUT VVC
enhancer:
  implementation: dense
  save_to: 'experiments/vvc_comparison/baseline_dense_enh.pth'
  bn_size: 1.5
  features:
    kernel_size: 9      # Like Piotr's config
    padding: 4
    stride: 1
    features: 64        # Initial 64 features
    pool: false
    dense: true
  structure:
    blocks:
      - kernel_size: 7
        padding: 3
        stride: 1
        features: 64    # 64x1 block (Piotr's best architecture)
        transition:
          mode: same
      - kernel_size: 5
        padding: 2
        stride: 1
        features: 48    # 48x1 block
        transition:
          mode: same
      - kernel_size: 3
        padding: 1
        stride: 1
        features: 32    # 32x1 block
        transition:
          mode: same
      - kernel_size: 3
        padding: 1
        stride: 1
        features: 16    # 16x1 block (final before output)
        transition:
          mode: same
  output_block:
    kernel_size: 3
    padding: 1
    stride: 1
    features: 3
    tanh: false

# Logging
logging:
  project_name: vvc-enhancer
  run_name: baseline_comparison_dense64
  log_every_n_steps: 50
  log_images: true
