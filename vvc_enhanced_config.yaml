# VVC-Enhanced Neural Network Configuration Example
# 
# This configuration extends the original enhancer with VVC intelligence:
# - RGB chunks (3 channels, 132x132)
# - Metadata (6 features) 
# - VVC features (13 channels from fused maps â†’ 16 processed)
# Total: 25 input channels to the network

# Example usage:
# python -m enhancer train --config vvc_enhanced_config.yaml

# Dataset paths - update these to your actual chunk directories
dataset:
  train:
    chunk_folder: "videos/chunks/train"
    orig_chunk_folder: "videos/orig_chunks/train"
    chunk_height: 132
    chunk_width: 132
  val:
    chunk_folder: "videos/chunks/val" 
    orig_chunk_folder: "videos/orig_chunks/val"
    chunk_height: 132
    chunk_width: 132
  test:
    chunk_folder: "videos/chunks/test"
    orig_chunk_folder: "videos/orig_chunks/test"
    chunk_height: 132
    chunk_width: 132

# DataLoader configuration
dataloader:
  n_step: 1000
  val_n_step: 100
  test_n_step: 50
  batch_size: 8
  val_batch_size: 16
  test_batch_size: 16

# Enhanced network configuration
enhancer:
  # Basic network settings
  input_shape: [132, 132, 3]  # RGB chunks
  metadata_size: 6
  metadata_features: 6
  with_mask: true
  
  # Network architecture
  implementation: "conv"  # or "dense", "res"
  reflect_padding: true
  activation: "prelu"
  
  # Network structure
  structure:
    blocks:
      - num_layers: 3
        features: 32
        kernel_size: 3
        padding: 1
        dropout: 0.1
      - num_layers: 3  
        features: 64
        kernel_size: 3
        padding: 1
        dropout: 0.1
      - num_layers: 3
        features: 32
        kernel_size: 3
        padding: 1
        dropout: 0.1
  
  # Output layer - IMPORTANT: must output 3 RGB channels
  output_block:
    features: 3
    kernel_size: 3
    padding: 1
    tanh: false

# Training configuration
trainer:
  mode: "enhancer"  # or "discriminator", "adversarial"
  enhancer_min_loss: 0.01
  discriminator_min_loss: 0.01
  channels_grad_scales: [1.0, 1.0, 1.0]  # Y, U, V channel weights

# VVC Intelligence Settings
# Path to fused maps directory (generated by decode_data.sh)
fused_maps_dir: "videos/decoded_new_script/720p50_mobcal_ter_AI_QP32_ALF1_DB1_SAO0/fused_maps"

# Optional: disable VVC features for comparison
# fused_maps_dir: null